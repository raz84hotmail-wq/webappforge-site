<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>WebAppForge Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}
body{background:#0B1220;color:#fff;height:100vh;overflow:hidden}

/* ===== BRAND ===== */
.waf-brand{position:relative;display:inline-block}
.waf-brand img{width:60px;display:block}
.waf-text{position:absolute;top:29px;left:40px;font-size:18px;font-weight:700}
.waf-text .forge{color:#1F7CFF}
.waf-ai{font-weight:700}

/* TOP BAR */
.topbar{height:72px;display:flex;align-items:center;padding:0 18px;border-bottom:1px solid rgba(255,255,255,.08)}
.topbar-spacer{flex:1}
.pill{font-size:12px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1)}

/* LAYOUT */
.wrap{height:calc(100vh - 72px);display:grid;grid-template-columns:320px 1fr}

/* SIDEBAR */
.sidebar{border-right:1px solid rgba(255,255,255,.08);padding:18px}
.card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
.btn{width:100%;padding:12px;border-radius:12px;border:none;cursor:pointer;font-weight:700;color:#fff;background:linear-gradient(90deg,#1F7CFF,#E056FD)}
.btn.secondary{background:transparent;border:1px solid rgba(255,255,255,.16);margin-top:10px}

/* MAIN */
.main{padding:18px;position:relative}
.preview{height:100%;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}
.preview iframe{width:100%;height:100%;border:0}

/* AI */
.ai{position:absolute;right:22px;bottom:22px;width:360px;height:460px;border-radius:18px;border:1px solid rgba(255,255,255,.14);background:rgba(10,16,30,.92);display:flex;flex-direction:column}
.ai.collapsed{height:52px}
.ai.collapsed .ai-body,.ai.collapsed .ai-input{display:none}
.ai-header{padding:4px 14px;display:flex;align-items:center;background:linear-gradient(90deg,rgba(31,124,255,.22),rgba(224,86,253,.18))}
.ai-spacer{flex:1}
.ai-toggle{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);color:#fff;border-radius:8px;padding:4px 8px;cursor:pointer}
.ai-body{flex:1;padding:14px;font-size:13px;overflow:auto}
.ai-input{padding:10px;border-top:1px solid rgba(255,255,255,.1);display:flex;gap:8px}
.ai-input input{flex:1;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:#fff;padding:10px}
.icon-btn{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:8px 10px;cursor:pointer;color:#fff}

/* ===== MODAL ===== */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:999}
.modal{width:520px;background:#0B1220;border-radius:18px;border:1px solid rgba(255,255,255,.12);padding:22px}
.modal h3{margin-bottom:10px}
.modal p{opacity:.85;margin-bottom:14px}
.modal input{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:#fff;margin-bottom:14px}
.modal-actions{display:flex;gap:10px;justify-content:flex-end}

/* ===== STEP 4.1 ‚Äì APP TYPE ===== */
.app-types{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-bottom:16px}
.app-type{padding:16px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);cursor:pointer;transition:.2s}
.app-type:hover{border-color:#1F7CFF}
.app-type.active{background:linear-gradient(90deg,rgba(31,124,255,.25),rgba(224,86,253,.25));border-color:#E056FD}
.app-type h4{margin-bottom:6px}
.app-type p{font-size:12px;opacity:.8}
</style>
</head>

<body>

<div id="wafRoot">
  <div class="topbar">
    <div class="waf-brand">
      <img src="logo-header.png">
      <div class="waf-text">WebApp<span class="forge">Forge</span></div>
    </div>
    <div class="topbar-spacer"></div>
    <div class="pill">Web-first ‚Ä¢ PWA Ready</div>
  </div>

  <div class="wrap">
    <aside class="sidebar">
      <div class="card">
        <button class="btn" onclick="openCreateApp()">Create App</button>
        <button class="btn secondary">Import Project (soon)</button>
      </div>
    </aside>

    <main class="main">
      <div class="preview"><iframe src="index.html"></iframe></div>

      <div class="ai" id="aiBox">
        <div class="ai-header">
          <div class="waf-brand">
            <img src="logo-header.png" style="width:54px">
            <div class="waf-text" style="top:26px;left:36px;font-size:14px">
              WebApp<span class="forge">Forge</span> <span class="waf-ai">AI</span>
            </div>
          </div>
          <div class="ai-spacer"></div>
          <button class="ai-toggle" onclick="toggleAI()">üü£</button>
        </div>
        <div class="ai-body" id="chatBody"></div>
        <div class="ai-input">
          <button class="icon-btn" onclick="sendSnapshot()">üì∏</button>
          <input id="msgInput" placeholder="Ask WebAppForge..." />
          <button class="icon-btn" onclick="sendMessage()">‚û§</button>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- STEP 4 MODAL -->
<div class="modal-overlay" id="createAppModal">
  <div class="modal">
    <h3>Create your App</h3>
    <p>Select app type</p>

    <div class="app-types">
      <div class="app-type" onclick="selectAppType('web')"><h4>üåê Web</h4><p>Standard Web App</p></div>
      <div class="app-type" onclick="selectAppType('pwa')"><h4>üì≤ PWA</h4><p>Installable</p></div>
      <div class="app-type" onclick="selectAppType('ios')"><h4>üçé iOS</h4><p>App Store</p></div>
      <div class="app-type" onclick="selectAppType('android')"><h4>ü§ñ Android</h4><p>Google Play</p></div>
    </div>

    <input id="appNameInput" placeholder="App name">

    <div class="modal-actions">
      <button class="btn secondary" onclick="closeCreateApp()">Cancel</button>
      <button class="btn" onclick="confirmCreateApp()">Continue</button>
    </div>
  </div>
</div>

<script>
let selectedAppType=null
const aiBox=document.getElementById('aiBox')
const chatBody=document.getElementById('chatBody')
const wafRoot=document.getElementById('wafRoot')
const msgInput=document.getElementById('msgInput')

function toggleAI(){aiBox.classList.toggle('collapsed')}
function openCreateApp(){createAppModal.style.display='flex'}
function closeCreateApp(){createAppModal.style.display='none'}

function selectAppType(type){
  selectedAppType=type
  document.querySelectorAll('.app-type').forEach(e=>e.classList.remove('active'))
  event.currentTarget.classList.add('active')
}

function confirmCreateApp(){
  const name=appNameInput.value.trim()
  if(!name||!selectedAppType){alert('Missing data');return}
  console.log('NEW APP:',name,selectedAppType)
  closeCreateApp()
}

function sendMessage(){
  if(!msgInput.value.trim())return
  const d=document.createElement('div')
  d.textContent=msgInput.value
  chatBody.appendChild(d)
  msgInput.value=''
}
function sendSnapshot(){
  html2canvas(wafRoot).then(c=>{
    const i=document.createElement('img')
    i.src=c.toDataURL()
    i.style.maxWidth='100%'
    chatBody.appendChild(i)
  })
}
</script>

</body>
</html>
