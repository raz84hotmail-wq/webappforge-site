<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>WebAppForge Dashboard</title>

<!-- JSZip -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}
body{background:#0B1220;color:#fff;height:100vh;overflow:hidden}

/* TOP BAR */
.topbar{
  height:72px;display:flex;align-items:center;gap:12px;
  padding:0 18px;border-bottom:1px solid rgba(255,255,255,0.08);
}
.topbar img{height:40px}
.brand{font-size:20px;font-weight:800}
.brand .forge{color:#1F7CFF}
.topbar-spacer{flex:1}
.pill{
  font-size:12px;padding:8px 12px;border-radius:999px;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.10)
}

/* LAYOUT */
.wrap{height:calc(100vh - 72px);display:grid;grid-template-columns:320px 1fr}

/* SIDEBAR */
.sidebar{
  border-right:1px solid rgba(255,255,255,0.08);
  padding:18px;background:rgba(11,18,32,0.65)
}
.sidebar h2{
  font-size:14px;letter-spacing:0.6px;
  text-transform:uppercase;opacity:0.85;margin-bottom:12px
}
.card{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:14px;padding:14px;margin-bottom:12px
}
.btn{
  width:100%;padding:12px 14px;border-radius:12px;
  border:none;cursor:pointer;color:#fff;font-weight:700;
  background:linear-gradient(90deg,#1F7CFF,#E056FD)
}
.btn.secondary{
  margin-top:10px;background:transparent;
  border:1px solid rgba(255,255,255,0.16);font-weight:600
}
.list{margin-top:14px;display:flex;flex-direction:column;gap:10px}
.item{
  padding:12px;border-radius:12px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.07);
  cursor:pointer
}
.item small{opacity:0.75;display:block;margin-top:4px}

/* MAIN */
.main{
  padding:18px;position:relative;
  background:
    radial-gradient(circle at top, rgba(224,86,253,0.10), transparent 55%),
    radial-gradient(circle at bottom left, rgba(31,124,255,0.12), transparent 55%),
    #0B1220
}
.preview{
  height:100%;border-radius:16px;overflow:hidden;
  border:1px solid rgba(255,255,255,0.10);
  background:rgba(255,255,255,0.03)
}
.preview iframe{width:100%;height:100%;border:0;background:#fff}

/* MODAL */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.55);
  display:none;align-items:center;justify-content:center;z-index:999
}
.modal{
  width:420px;border-radius:18px;padding:20px;
  background:#0B1220;border:1px solid rgba(255,255,255,0.14)
}
.modal h3{margin-bottom:14px}
.modal button{margin-top:10px}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <img src="logo-header.png" />
  <div class="brand">WebApp<span class="forge">Forge</span></div>
  <div class="topbar-spacer"></div>
  <div class="pill">Web-first â€¢ PWA Ready</div>
</div>

<div class="wrap">

<!-- SIDEBAR -->
<aside class="sidebar">
  <h2>Projects</h2>

  <div class="card">
    <button class="btn" onclick="openCreateModal()">Create App</button>
    <button class="btn secondary" onclick="openZip()">Import ZIP</button>
  </div>

  <div class="list" id="projectList"></div>
</aside>

<!-- MAIN -->
<main class="main">
  <div class="preview">
    <iframe id="previewFrame"></iframe>
  </div>
</main>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="createModal">
  <div class="modal">
    <h3>Create new App</h3>
    <input id="appName" placeholder="App name"
      style="width:100%;padding:12px;border-radius:10px;border:none;margin-bottom:10px">
    <button class="btn" onclick="createApp()">Create</button>
    <button class="btn secondary" onclick="closeCreateModal()">Close</button>
  </div>
</div>

<input type="file" id="zipInput" accept=".zip" hidden />

<script>
let projects = JSON.parse(localStorage.getItem("projects") || "[]");

function save(){
  localStorage.setItem("projects", JSON.stringify(projects));
  render();
}

function render(){
  const list = document.getElementById("projectList");
  list.innerHTML = "";
  projects.forEach(p=>{
    const el = document.createElement("div");
    el.className="item";
    el.innerHTML = p.name + "<small>"+p.type+"</small>";
    el.onclick=()=>{ if(p.url) preview(p.url); };
    list.appendChild(el);
  });
}

function openCreateModal(){
  document.getElementById("createModal").style.display="flex";
}
function closeCreateModal(){
  document.getElementById("createModal").style.display="none";
}

function createApp(){
  const name = document.getElementById("appName").value.trim();
  if(!name) return;
  projects.push({name, type:"Blank App"});
  save();
  closeCreateModal();
}

function openZip(){
  document.getElementById("zipInput").click();
}

document.getElementById("zipInput").addEventListener("change", async e=>{
  const file = e.target.files[0];
  if(!file) return;

  const zip = await JSZip.loadAsync(file);
  let indexFile = null;

  zip.forEach((path, file)=>{
    if(path.toLowerCase().endsWith("index.html")) indexFile = file;
  });

  if(!indexFile){
    alert("index.html not found in ZIP");
    return;
  }

  const html = await indexFile.async("text");
  const blob = new Blob([html], {type:"text/html"});
  const url = URL.createObjectURL(blob);

  projects.push({name:file.name, type:"ZIP Import", url});
  save();
  preview(url);
});

function preview(url){
  document.getElementById("previewFrame").src = url;
}

render();
</script>

</body>
</html>
